<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          background: #f5f7fb;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          margin: 0;
        }
    
        .chat-container {
          width: 100%;
          max-width: 500px;
          height: 80vh;
          background: #fff;
          border-radius: 16px;
          display: flex;
          flex-direction: column;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
          overflow: hidden;
        }
    
        .chat-header {
          background: #3d2863;
          color: white;
          padding: 16px;
          text-align: center;
          font-size: 18px;
          font-weight: bold;
        }
    
        .chat-box {
          flex: 1;
          padding: 16px;
          overflow-y: auto;
        }
    
        .message {
          margin: 8px 0;
          padding: 12px 16px;
          border-radius: 16px;
          max-width: 75%;
          line-height: 1.4;
          animation: fadeIn 0.3s ease-in-out;
          white-space: pre-wrap;
        }
    
        .user {
          background: #6c21aa;
          color: white;
          margin-left: auto;
        }
    
        .bot {
          background: #9bbe40;
          color: white;
          margin-right: auto;
        }
    
        .bot h2 {
          font-size: 16px;
          font-weight: bold;
          margin: 6px 0;
        }
    
        .bot ul {
          margin: 6px 0;
          padding-left: 20px;
        }
    
        .bot li {
          margin: 4px 0;
        }
    
        .typing {
          display: flex;
          gap: 4px;
          align-items: center;
          justify-content: flex-start;
        }
    
        .dot {
          width: 8px;
          height: 8px;
          background: #999;
          border-radius: 50%;
          animation: bounce 1s infinite;
        }
    
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }
    
        @keyframes bounce {
          0%, 80%, 100% { transform: translateY(0); }
          40% { transform: translateY(-6px); }
        }
    
        .chat-input {
          display: flex;
          border-top: 1px solid #ddd;
          padding: 8px;
          background: #fafafa;
        }
    
        .chat-input input {
          flex: 1;
          border: none;
          padding: 12px;
          border-radius: 20px;
          outline: none;
          font-size: 14px;
          background: #fff;
          box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
    
        .chat-input button {
          margin-left: 8px;
          padding: 0 16px;
          border: none;
          border-radius: 20px;
          background: #5b0d70;
          color: white;
          font-size: 14px;
          cursor: pointer;
          transition: background 0.2s;
        }
    
        .chat-input button:hover {
          background: #541278;
        }
    
        @keyframes fadeIn {
          from {opacity: 0; transform: translateY(10px);}
          to {opacity: 1; transform: translateY(0);}
        }

         /* üîπ Stylish blue bullet points */
         .bot-list {
          list-style: none;
          margin: 6px 0 6px 20px;
          padding: 0;
        }
      
        .bot-list li {
          position: relative;
          padding-left: 20px;
          margin: 6px 0;
          line-height: 1.5;
        }
      
        .bot-list li::before {
          content: "üîπ"; /* Blue diamond icon */
          position: absolute;
          left: 0;
          top: 0;
          color: #2a0738; /* blue tone to match header */
          font-size: 14px;
        }

        .maa{
          background-image: url(images/laptop2.jpg);
          background-position: center;
          background-size: cover;
          background-repeat: no-repeat;
        }
      </style>
</head>

<body class="maa">
    <div class="chat-container">
        <div class="chat-header">
          <h2>ü§ñ BiG Devv AI Chatbot ü§ñ</h2>
          <p >Welcome to Big Devv AI Chatbot  ‚Äì Revolutionize Your World with Intelligent Conversations!</p>
        </div>
        

        <div class="chat-box" id="chat-box"></div>
        <div class="chat-input">
          <input type="text" id="prompts" placeholder="Type a message..." onkeydown="if(event.key==='Enter') getGeminiResponse()">
          <button onclick="getGeminiResponse()">Send</button>
        </div>
      </div>
      <script>
        const chatBox = document.getElementById("chat-box");
        const input = document.getElementById("prompts");
      
        function addMessage(text, sender) {
          const msg = document.createElement("div");
          msg.className = `message ${sender}`;
          if (sender === "bot") {
            msg.innerHTML = formatAIResponse(text);
          } else {
            msg.textContent = text;
          }
          chatBox.appendChild(msg);
          chatBox.scrollTop = chatBox.scrollHeight;
        }
      
        function addTypingIndicator() {
          const container = document.createElement("div");
          container.className = "message bot typing";
          container.innerHTML = `
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          `;
          chatBox.appendChild(container);
          chatBox.scrollTop = chatBox.scrollHeight;
          return container;
        }
      
        const getGeminiResponse = async () => {
          const userText = input.value.trim();
          if (!userText) return;
      
          addMessage(userText, "user");
          input.value = "";
      
          const typingIndicator = addTypingIndicator();
      
          const myKey = "AIzaSyDBoJOTiDIhX806-LYxITfARTUJYRQlQMk";
          const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent?key=${myKey}`;
      
          try {
            const response = await fetch(url, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                contents: [{ parts: [{ text: userText }] }]
              })
            });
      
            const data = await response.json();
            chatBox.removeChild(typingIndicator);
      
            const rawReply = data.candidates?.[0]?.content?.parts?.[0]?.text || "‚ö†Ô∏è No response from AI";
            addMessage(rawReply, "bot");
      
          } catch (err) {
            chatBox.removeChild(typingIndicator);
            addMessage("‚ùå Error: " + err.message, "bot");
          }
        };
      
        // ‚úÖ Formats clean bullets and headings, removes all asterisks
        function formatAIResponse(text) {
          // Remove markdown bold/italic asterisks
          text = text.replace(/\*\*(.*?)\*\*/g, "$1");
          text = text.replace(/\*(.*?)\*/g, "$1");
      
          // Convert headings (# Heading) ‚Üí bold
          text = text.replace(/^#{1,6}\s?(.*)$/gm, "<strong>$1</strong>");
      
          const lines = text.split("\n");
          let formatted = "";
          let inList = false;
      
          lines.forEach(line => {
            if (line.trim().startsWith("*")) {
              if (!inList) {
                formatted += "<ul class='bot-list'>";
                inList = true;
              }
              const cleanLine = line
                .replace(/^\*\s*/, "") // remove starting *
                .replace(/\s*\*$/, "") // remove trailing *
                .trim();
              formatted += `<li>${cleanLine}</li>`;
            } else {
              if (inList) {
                formatted += "</ul>";
                inList = false;
              }
              if (line.trim() !== "") formatted += `<p>${line}</p>`;
            }
          });
      
          if (inList) formatted += "</ul>";
          return formatted;
        }
      </script>  
      
</body>
</html>